import*as pe from"./svelte/svelte.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function t(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(r){if(r.ep)return;r.ep=!0;const n=t(r);fetch(r.href,n)}})();const Ge="modulepreload",Me=function(e,s){return new URL(e,s).href},De={},ge=function(s,t,o){if(!t||t.length===0)return s();const r=document.getElementsByTagName("link");return Promise.all(t.map(n=>{if(n=Me(n,o),n in De)return;De[n]=!0;const i=n.endsWith(".css"),f=i?'[rel="stylesheet"]':"";if(!!o)for(let u=r.length-1;u>=0;u--){const p=r[u];if(p.href===n&&(!i||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${n}"]${f}`))return;const l=document.createElement("link");if(l.rel=i?"stylesheet":Ge,i||(l.as="script",l.crossOrigin=""),l.href=n,document.head.appendChild(l),i)return new Promise((u,p)=>{l.addEventListener("load",u),l.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>s())};var de=new Intl.Collator(0,{numeric:1}).compare;function Ce(e,s,t){return e=e.split("."),s=s.split("."),de(e[0],s[0])||de(e[1],s[1])||(s[2]=s.slice(2).join("."),t=/[.-]/.test(e[2]=e.slice(2).join(".")),t==/[.-]/.test(s[2])?de(e[2],s[2]):t?-1:1)}function Re(e,s,t){return s.startsWith("http://")||s.startsWith("https://")?t?e:s:e+s}function fe(e){if(e.startsWith("http")){const{protocol:s,host:t}=new URL(e);return t.endsWith("hf.space")?{ws_protocol:"wss",host:t,http_protocol:s}:{ws_protocol:s==="https:"?"wss":"ws",http_protocol:s,host:t}}else if(e.startsWith("file:"))return{ws_protocol:"ws",http_protocol:"http:",host:"lite.local"};return{ws_protocol:"wss",http_protocol:"https:",host:e}}const Pe=/^[^\/]*\/[^\/]*$/,Ke=/.*hf\.space\/{0,1}$/;async function Ve(e,s){const t={};s&&(t.Authorization=`Bearer ${s}`);const o=e.trim();if(Pe.test(o))try{const r=await fetch(`https://huggingface.co/api/spaces/${o}/host`,{headers:t});if(r.status!==200)throw new Error("Space metadata could not be loaded.");const n=(await r.json()).host;return{space_id:e,...fe(n)}}catch(r){throw new Error("Space metadata could not be loaded."+r.message)}if(Ke.test(o)){const{ws_protocol:r,http_protocol:n,host:i}=fe(o);return{space_id:i.replace(".hf.space",""),ws_protocol:r,http_protocol:n,host:i}}return{space_id:!1,...fe(o)}}function He(e){let s={};return e.forEach(({api_name:t},o)=>{t&&(s[t]=o)}),s}const Ye=/^(?=[^]*\b[dD]iscussions{0,1}\b)(?=[^]*\b[dD]isabled\b)[^]*$/;async function qe(e){try{const t=(await fetch(`https://huggingface.co/api/spaces/${e}/discussions`,{method:"HEAD"})).headers.get("x-error-message");return!(t&&Ye.test(t))}catch{return!1}}function Qe(e,s,t,o){if(s.length===0){if(t==="replace")return o;if(t==="append")return e+o;throw new Error(`Unsupported action: ${t}`)}let r=e;for(let i=0;i<s.length-1;i++)r=r[s[i]];const n=s[s.length-1];switch(t){case"replace":r[n]=o;break;case"append":r[n]+=o;break;case"add":Array.isArray(r)?r.splice(Number(n),0,o):r[n]=o;break;case"delete":Array.isArray(r)?r.splice(Number(n),1):delete r[n];break;default:throw new Error(`Unknown action: ${t}`)}return e}function Xe(e,s){return s.forEach(([t,o,r])=>{e=Qe(e,o,t,r)}),e}function Ze(e,s){return new Promise((t,o)=>{const r=new MessageChannel;r.port1.onmessage=({data:n})=>{r.port1.close(),t(n)},window.parent.postMessage(e,s,[r.port2])})}async function lt(e,s,t,o=me){let r=(Array.isArray(e)?e:[e]).map(n=>n.blob);return await Promise.all(await o(s,r,void 0,t).then(async n=>{if(n.error)throw new Error(n.error);return n.files?n.files.map((i,f)=>new ve({...e[f],path:i,url:s+"/file="+i})):[]}))}async function ct(e,s){return e.map((t,o)=>new ve({path:t.name,orig_name:t.name,blob:t,size:t.size,mime_type:t.type,is_stream:s}))}class ve{constructor({path:s,url:t,orig_name:o,size:r,blob:n,is_stream:i,mime_type:f,alt_text:_}){this.meta={_type:"gradio.FileData"},this.path=s,this.url=t,this.orig_name=o,this.size=r,this.blob=t?void 0:n,this.is_stream=i,this.mime_type=f,this.alt_text=_}}const Le="This application is too busy. Keep trying!",K="Connection errored out.";let Ue;function et(e,s){return{post_data:t,upload_files:o,client:r,handle_blob:n};async function t(i,f,_,l){const u={"Content-Type":"application/json"};_&&(u.Authorization=`Bearer ${_}`);try{var p=await e(i,{method:"POST",body:JSON.stringify(f),headers:{...u,...l}})}catch{return[{error:K},500]}let h,$;try{h=await p.json(),$=p.status}catch(O){h={error:`Could not parse server response: ${O}`},$=500}return[h,$]}async function o(i,f,_,l){const u={};_&&(u.Authorization=`Bearer ${_}`);const p=1e3,h=[];for(let O=0;O<f.length;O+=p){const B=f.slice(O,O+p),q=new FormData;B.forEach(F=>{q.append("files",F)});try{const F=l?`${i}/upload?upload_id=${l}`:`${i}/upload`;var $=await e(F,{method:"POST",body:q,headers:u})}catch{return{error:K}}const G=await $.json();h.push(...G)}return{files:h}}async function r(i,f={}){return new Promise(async _=>{const{status_callback:l,hf_token:u}=f,p={predict:Ie,submit:$e,view_api:Ee,component_server:We};if((typeof window>"u"||!("WebSocket"in window))&&!global.Websocket){const d=await ge(()=>import("./wrapper-6f348d45-ccf15bad.js"),["./wrapper-6f348d45-ccf15bad.js","./__vite-browser-external-d8e3c0c7.js"],import.meta.url);Ue=(await ge(()=>import("./__vite-browser-external-d8e3c0c7.js").then(E=>E._),[],import.meta.url)).Blob,global.WebSocket=d.WebSocket}const{ws_protocol:h,http_protocol:$,host:O,space_id:B}=await Ve(i,u),q=Math.random().toString(36).substring(2),G={};let F=!1,V={},M={},Y=null;const I={},re=new Set;let g,Q={},oe=!1;u&&B&&(oe=await st(B,u));async function Se(d){if(g=d,window.location.protocol==="https:"&&(g.root=g.root.replace("http://","https://")),Q=He(d?.dependencies||[]),g.auth_required)return{config:g,...p};try{X=await Ee(g)}catch(E){console.error(`Could not get api details: ${E.message}`)}return{config:g,...p}}let X;async function ze(d){if(l&&l(d),d.status==="running")try{g=await Ae(e,`${$}//${O}`,u);const E=await Se(g);_(E)}catch(E){console.error(E),l&&l({status:"error",message:"Could not load this space.",load_status:"error",detail:"NOT_FOUND"})}}try{g=await Ae(e,`${$}//${O}`,u);const d=await Se(g),E=new URL(`${g.root}/heartbeat/${q}`);s(E),_(d)}catch(d){console.error(d),B?we(B,Pe.test(B)?"space_name":"subdomain",ze):l&&l({status:"error",message:"Could not load this space.",load_status:"error",detail:"NOT_FOUND"})}function Ie(d,E,N){let w=!1,a=!1,R;if(typeof d=="number")R=g.dependencies[d];else{const z=d.replace(/^\//,"");R=g.dependencies[Q[z]]}if(R.types.continuous)throw new Error("Cannot call predict on this function as it may run forever. Use submit instead");return new Promise((z,S)=>{const D=$e(d,E,N);let L;D.on("data",c=>{a&&(D.destroy(),z(c)),w=!0,L=c}).on("status",c=>{c.stage==="error"&&S(c),c.stage==="complete"&&(a=!0,w&&(D.destroy(),z(L)))})})}function $e(d,E,N,w=null){let a,R,z;if(typeof d=="number")a=d,R=X.unnamed_endpoints[a],z=g.dependencies[d];else{const y=d.replace(/^\//,"");a=Q[y],R=X.named_endpoints[d.trim()],z=g.dependencies[Q[y]]}if(typeof a!="number")throw new Error("There is no endpoint matching that name of fn_index matching that number.");let S,D,L=g.protocol??"ws";const c=typeof d=="number"?"/predict":d;let Z,P=null,U=!1;const ee={};let W="";typeof window<"u"&&(W=new URLSearchParams(window.location.search).toString()),n(`${g.root}`,E,R,u).then(y=>{if(Z={data:y||[],event_data:N,fn_index:a,trigger_id:w},nt(a,g))m({type:"status",endpoint:c,stage:"pending",queue:!1,fn_index:a,time:new Date}),t(`${g.root}/run${c.startsWith("/")?c:`/${c}`}${W?"?"+W:""}`,{...Z,session_hash:q},u).then(([b,v])=>{const T=b.data;v==200?(m({type:"data",endpoint:c,fn_index:a,data:T,time:new Date}),m({type:"status",endpoint:c,fn_index:a,stage:"complete",eta:b.average_duration,queue:!1,time:new Date})):m({type:"status",stage:"error",endpoint:c,fn_index:a,message:b.error,queue:!1,time:new Date})}).catch(b=>{m({type:"status",stage:"error",message:b.message,endpoint:c,fn_index:a,queue:!1,time:new Date})});else if(L=="ws"){m({type:"status",stage:"pending",queue:!0,endpoint:c,fn_index:a,time:new Date});let b=new URL(`${h}://${Re(O,g.path,!0)}
							/queue/join${W?"?"+W:""}`);oe&&b.searchParams.set("__sign",oe),S=new WebSocket(b),S.onclose=v=>{v.wasClean||m({type:"status",stage:"error",broken:!0,message:K,queue:!0,endpoint:c,fn_index:a,time:new Date})},S.onmessage=function(v){const T=JSON.parse(v.data),{type:A,status:C,data:j}=he(T,G[a]);if(A==="update"&&C&&!U)m({type:"status",endpoint:c,fn_index:a,time:new Date,...C}),C.stage==="error"&&S.close();else if(A==="hash"){S.send(JSON.stringify({fn_index:a,session_hash:q}));return}else A==="data"?S.send(JSON.stringify({...Z,session_hash:q})):A==="complete"?U=C:A==="log"?m({type:"log",log:j.log,level:j.level,endpoint:c,fn_index:a}):A==="generating"&&m({type:"status",time:new Date,...C,stage:C?.stage,queue:!0,endpoint:c,fn_index:a});j&&(m({type:"data",time:new Date,data:j.data,endpoint:c,fn_index:a}),U&&(m({type:"status",time:new Date,...U,stage:C?.stage,queue:!0,endpoint:c,fn_index:a}),S.close()))},Ce(g.version||"2.0.0","3.6")<0&&addEventListener("open",()=>S.send(JSON.stringify({hash:q})))}else if(L=="sse"){m({type:"status",stage:"pending",queue:!0,endpoint:c,fn_index:a,time:new Date});var k=new URLSearchParams({fn_index:a.toString(),session_hash:q}).toString();let b=new URL(`${g.root}/queue/join?${W?W+"&":""}${k}`);D=s(b),D.onmessage=async function(v){const T=JSON.parse(v.data),{type:A,status:C,data:j}=he(T,G[a]);if(A==="update"&&C&&!U)m({type:"status",endpoint:c,fn_index:a,time:new Date,...C}),C.stage==="error"&&D.close();else if(A==="data"){P=T.event_id;let[ce,ne]=await t(`${g.root}/queue/data`,{...Z,session_hash:q,event_id:P},u);ne!==200&&(m({type:"status",stage:"error",message:K,queue:!0,endpoint:c,fn_index:a,time:new Date}),D.close())}else A==="complete"?U=C:A==="log"?m({type:"log",log:j.log,level:j.level,endpoint:c,fn_index:a}):A==="generating"&&m({type:"status",time:new Date,...C,stage:C?.stage,queue:!0,endpoint:c,fn_index:a});j&&(m({type:"data",time:new Date,data:j.data,endpoint:c,fn_index:a}),U&&(m({type:"status",time:new Date,...U,stage:C?.stage,queue:!0,endpoint:c,fn_index:a}),D.close()))}}else if(L=="sse_v1"||L=="sse_v2"||L=="sse_v2.1"||L=="sse_v3"){m({type:"status",stage:"pending",queue:!0,endpoint:c,fn_index:a,time:new Date});let b=window.location.hostname,v="dev.spaces.huggingface.tech";const T=b.includes(".dev.")?`https://moon-${b.split(".")[1]}.${v}`:"https://huggingface.co";(z.zerogpu&&window.parent!=window&&g.space_id?Ze("zerogpu-headers",T):Promise.resolve(null)).then(j=>t(`${g.root}/queue/join?${W}`,{...Z,session_hash:q},u,j)).then(([j,ce])=>{if(ce===503)m({type:"status",stage:"error",message:Le,queue:!0,endpoint:c,fn_index:a,time:new Date});else if(ce!==200)m({type:"status",stage:"error",message:K,queue:!0,endpoint:c,fn_index:a,time:new Date});else{P=j.event_id;let ne=async function(ue){try{const{type:J,status:x,data:H}=he(ue,G[a]);if(J=="heartbeat")return;if(J==="update"&&x&&!U)m({type:"status",endpoint:c,fn_index:a,time:new Date,...x});else if(J==="complete")U=x;else if(J=="unexpected_error")console.error("Unexpected error",x?.message),m({type:"status",stage:"error",message:x?.message||"An Unexpected Error Occurred!",queue:!0,endpoint:c,fn_index:a,time:new Date});else if(J==="log"){m({type:"log",log:H.log,level:H.level,endpoint:c,fn_index:a});return}else J==="generating"&&(m({type:"status",time:new Date,...x,stage:x?.stage,queue:!0,endpoint:c,fn_index:a}),H&&["sse_v2","sse_v2.1","sse_v3"].includes(L)&&Je(P,H));H&&(m({type:"data",time:new Date,data:H.data,endpoint:c,fn_index:a}),U&&m({type:"status",time:new Date,...U,stage:x?.stage,queue:!0,endpoint:c,fn_index:a})),(x?.stage==="complete"||x?.stage==="error")&&(I[P]&&delete I[P],P in M&&delete M[P])}catch(J){console.error("Unexpected client exception",J),m({type:"status",stage:"error",message:"An Unexpected Error Occurred!",queue:!0,endpoint:c,fn_index:a,time:new Date}),["sse_v2","sse_v2.1"].includes(L)&&te()}};P in V&&(V[P].forEach(ue=>ne(ue)),delete V[P]),I[P]=ne,re.add(P),F||Fe()}})}});function Je(y,k){!M[y]?(M[y]=[],k.data.forEach((v,T)=>{M[y][T]=v})):k.data.forEach((v,T)=>{let A=Xe(M[y][T],v);M[y][T]=A,k.data[T]=A})}function m(y){const b=ee[y.type]||[];b?.forEach(v=>v(y))}function ie(y,k){const b=ee,v=b[y]||[];return b[y]=v,v?.push(k),{on:ie,off:se,cancel:ae,destroy:le}}function se(y,k){const b=ee;let v=b[y]||[];return v=v?.filter(T=>T!==k),b[y]=v,{on:ie,off:se,cancel:ae,destroy:le}}async function ae(){const y={stage:"complete",queue:!1,time:new Date};U=y,m({...y,type:"status",endpoint:c,fn_index:a});let k={};L==="ws"?(S&&S.readyState===0?S.addEventListener("open",()=>{S.close()}):S.close(),k={fn_index:a,session_hash:q}):(D.close(),k={event_id:P});try{await e(`${g.root}/reset`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(k)})}catch{console.warn("The `/reset` endpoint could not be called. Subsequent endpoint results may be unreliable.")}}function le(){for(const y in ee)ee[y].forEach(k=>{se(y,k)})}return{on:ie,off:se,cancel:ae,destroy:le}}function Fe(){F=!0;let d=new URLSearchParams({session_hash:q}).toString(),E=new URL(`${g.root}/queue/data?${d}`);Y=s(E),Y.onmessage=async function(N){let w=JSON.parse(N.data);if(w.msg==="close_stream"){te();return}const a=w.event_id;if(!a)await Promise.all(Object.keys(I).map(R=>I[R](w)));else if(I[a]){w.msg==="process_completed"&&["sse","sse_v1","sse_v2","sse_v2.1"].includes(g.protocol)&&(re.delete(a),re.size===0&&te());let R=I[a];window.setTimeout(R,0,w)}else V[a]||(V[a]=[]),V[a].push(w)},Y.onerror=async function(N){await Promise.all(Object.keys(I).map(w=>I[w]({msg:"unexpected_error",message:K}))),te()}}function te(){F=!1,Y?.close()}async function We(d,E,N){var w;const a={};let R,z=g.components.find(D=>D.id===d);(w=z?.props)!=null&&w.root_url?R=z.props.root_url:R=g.root;let S;if(N.binary){S=new FormData;for(const D in N.data)D!=="binary"&&S.append(D,N.data[D]);S.set("component_id",d),S.set("fn_name",E),S.set("session_hash",q)}else S=JSON.stringify({data:N,component_id:d,fn_name:E,session_hash:q}),a["Content-Type"]="application/json";u&&(a.Authorization=`Bearer ${u}`);try{const D=await e(`${R}/component_server/`,{method:"POST",body:S,headers:a});if(!D.ok)throw new Error("Could not connect to component server: "+D.statusText);return await D.json()}catch(D){console.warn(D)}}async function Ee(d){if(X)return X;const E={"Content-Type":"application/json"};u&&(E.Authorization=`Bearer ${u}`);let N;if(Ce(d.version||"2.0.0","3.30")<0?N=await e("https://gradio-space-api-fetcher-v2.hf.space/api",{method:"POST",body:JSON.stringify({serialize:!1,config:JSON.stringify(d)}),headers:E}):N=await e(`${d.root}/info`,{headers:E}),!N.ok)throw new Error(K);let w=await N.json();return"api"in w&&(w=w.api),w.named_endpoints["/predict"]&&!w.unnamed_endpoints[0]&&(w.unnamed_endpoints[0]=w.named_endpoints["/predict"]),tt(w,d,Q)}})}async function n(i,f,_,l){const u=await _e(f,void 0,[],!0,_);return Promise.all(u.map(async({path:p,blob:h,type:$})=>{if(h){const O=(await o(i,[h],l)).files[0];return{path:p,file_url:O,type:$,name:h?.name}}return{path:p,type:$}})).then(p=>(p.forEach(({path:h,file_url:$,type:O,name:B})=>{if(O==="Gallery")Te(f,$,h);else if($){const q=new ve({path:$,orig_name:B});Te(f,q,h)}}),f))}}const{post_data:ut,upload_files:me,client:Oe,handle_blob:pt}=et(fetch,(...e)=>new EventSource(...e));function Ne(e,s,t,o){switch(e.type){case"string":return"string";case"boolean":return"boolean";case"number":return"number"}if(t==="JSONSerializable"||t==="StringSerializable")return"any";if(t==="ListStringSerializable")return"string[]";if(s==="Image")return o==="parameter"?"Blob | File | Buffer":"string";if(t==="FileSerializable")return e?.type==="array"?o==="parameter"?"(Blob | File | Buffer)[]":"{ name: string; data: string; size?: number; is_file?: boolean; orig_name?: string}[]":o==="parameter"?"Blob | File | Buffer":"{ name: string; data: string; size?: number; is_file?: boolean; orig_name?: string}";if(t==="GallerySerializable")return o==="parameter"?"[(Blob | File | Buffer), (string | null)][]":"[{ name: string; data: string; size?: number; is_file?: boolean; orig_name?: string}, (string | null))][]"}function ke(e,s){return s==="GallerySerializable"?"array of [file, label] tuples":s==="ListStringSerializable"?"array of strings":s==="FileSerializable"?"array of files or single file":e.description}function tt(e,s,t){const o={named_endpoints:{},unnamed_endpoints:{}};for(const r in e){const n=e[r];for(const i in n){const f=s.dependencies[i]?i:t[i.replace("/","")],_=n[i];o[r][i]={},o[r][i].parameters={},o[r][i].returns={},o[r][i].type=s.dependencies[f].types,o[r][i].parameters=_.parameters.map(({label:l,component:u,type:p,serializer:h})=>({label:l,component:u,type:Ne(p,u,h,"parameter"),description:ke(p,h)})),o[r][i].returns=_.returns.map(({label:l,component:u,type:p,serializer:h})=>({label:l,component:u,type:Ne(p,u,h,"return"),description:ke(p,h)}))}}return o}async function st(e,s){try{return(await(await fetch(`https://huggingface.co/api/spaces/${e}/jwt`,{headers:{Authorization:`Bearer ${s}`}})).json()).token||!1}catch(t){return console.error(t),!1}}function Te(e,s,t){for(;t.length>1;)e=e[t.shift()];e[t.shift()]=s}async function _e(e,s=void 0,t=[],o=!1,r=void 0){if(Array.isArray(e)){let n=[];return await Promise.all(e.map(async(i,f)=>{var _;let l=t.slice();l.push(f);const u=await _e(e[f],o?((_=r?.parameters[f])==null?void 0:_.component)||void 0:s,l,!1,r);n=n.concat(u)})),n}else{if(globalThis.Buffer&&e instanceof globalThis.Buffer)return[{path:t,blob:s==="Image"?!1:new Ue([e]),type:s}];if(typeof e=="object"){let n=[];for(let i in e)if(e.hasOwnProperty(i)){let f=t.slice();f.push(i),n=n.concat(await _e(e[i],void 0,f,!1,r))}return n}}return[]}function nt(e,s){var t,o,r,n;return!(((o=(t=s?.dependencies)==null?void 0:t[e])==null?void 0:o.queue)===null?s.enable_queue:(n=(r=s?.dependencies)==null?void 0:r[e])!=null&&n.queue)||!1}async function Ae(e,s,t){const o={};if(t&&(o.Authorization=`Bearer ${t}`),typeof window<"u"&&window.gradio_config&&location.origin!=="http://localhost:9876"&&!window.gradio_config.dev_mode){const r=window.gradio_config.root,n=window.gradio_config;return n.root=Re(s,n.root,!1),{...n,path:r}}else if(s){let r=await e(`${s}/config`,{headers:o});if(r.status===200){const n=await r.json();return n.path=n.path??"",n.root=s,n}throw new Error("Could not get config.")}throw new Error("No config or app endpoint found")}async function we(e,s,t){let o=s==="subdomain"?`https://huggingface.co/api/spaces/by-subdomain/${e}`:`https://huggingface.co/api/spaces/${e}`,r,n;try{if(r=await fetch(o),n=r.status,n!==200)throw new Error;r=await r.json()}catch{t({status:"error",load_status:"error",message:"Could not get space status",detail:"NOT_FOUND"});return}if(!r||n!==200)return;const{runtime:{stage:i},id:f}=r;switch(i){case"STOPPED":case"SLEEPING":t({status:"sleeping",load_status:"pending",message:"Space is asleep. Waking it up...",detail:i}),setTimeout(()=>{we(e,s,t)},1e3);break;case"PAUSED":t({status:"paused",load_status:"error",message:"This space has been paused by the author. If you would like to try this demo, consider duplicating the space.",detail:i,discussions_enabled:await qe(f)});break;case"RUNNING":case"RUNNING_BUILDING":t({status:"running",load_status:"complete",message:"",detail:i});break;case"BUILDING":t({status:"building",load_status:"pending",message:"Space is building...",detail:i}),setTimeout(()=>{we(e,s,t)},1e3);break;default:t({status:"space_error",load_status:"error",message:"This space is experiencing an issue.",detail:i,discussions_enabled:await qe(f)});break}}function he(e,s){switch(e.msg){case"send_data":return{type:"data"};case"send_hash":return{type:"hash"};case"queue_full":return{type:"update",status:{queue:!0,message:Le,stage:"error",code:e.code,success:e.success}};case"heartbeat":return{type:"heartbeat"};case"unexpected_error":return{type:"unexpected_error",status:{queue:!0,message:e.message,stage:"error",success:!1}};case"estimation":return{type:"update",status:{queue:!0,stage:s||"pending",code:e.code,size:e.queue_size,position:e.rank,eta:e.rank_eta,success:e.success}};case"progress":return{type:"update",status:{queue:!0,stage:"pending",code:e.code,progress_data:e.progress_data,success:e.success}};case"log":return{type:"log",data:e};case"process_generating":return{type:"generating",status:{queue:!0,message:e.success?null:e.output.error,stage:e.success?"generating":"error",code:e.code,progress_data:e.progress_data,eta:e.average_duration},data:e.success?e.output:null};case"process_completed":return"error"in e.output?{type:"update",status:{queue:!0,message:e.output.error,stage:"error",code:e.code,success:e.success}}:{type:"complete",status:{queue:!0,message:e.success?void 0:e.output.error,stage:e.success?"complete":"error",code:e.code,progress_data:e.progress_data},data:e.success?e.output:null};case"process_starts":return{type:"update",status:{queue:!0,stage:"pending",code:e.code,size:e.rank,position:0,success:e.success,eta:e.eta}}}return{type:"none",status:{stage:"error",queue:!0}}}let je=!1;"attachShadow"in Element.prototype&&"adoptedStyleSheets"in Document.prototype&&(je="adoptedStyleSheets"in document.createElement("div").attachShadow({mode:"open"}));function xe(e,s){const t=new URL(import.meta.url).origin,o=new URL(e,t).href;if(document.querySelector(`link[href='${o}']`))return Promise.resolve();const n=document.createElement("link");return n.rel="stylesheet",n.href=o,new Promise((i,f)=>{n.addEventListener("load",()=>i()),n.addEventListener("error",()=>{console.error(`Unable to preload CSS for ${o}`),i()}),s.appendChild(n)})}function dt(e,s,t=document.createElement("style")){if(!je)return null;t.remove();const o=new CSSStyleSheet;o.replaceSync(e);let r="";e=e.replace(/@import\s+url\((.*?)\);\s*/g,(_,l)=>(r+=`@import url(${l});
`,""));const n=o.cssRules;let i="",f=`gradio-app .gradio-container.gradio-container-${s} .contain `;for(let _=0;_<n.length;_++){const l=n[_];let u=l.cssText.includes(".dark");if(l instanceof CSSStyleRule){const p=l.selectorText;if(p){const h=p.replace(".dark","").split(",").map($=>`${u?".dark":""} ${f} ${$.trim()} `).join(",");i+=l.cssText,i+=l.cssText.replace(p,h)}}else if(l instanceof CSSMediaRule){let p=`@media ${l.media.mediaText} {`;for(let h=0;h<l.cssRules.length;h++){const $=l.cssRules[h];if($ instanceof CSSStyleRule){let O=$.cssText.includes(".dark ");const B=$.selectorText,q=B.replace(".dark","").split(",").map(G=>`${O?".dark":""} ${f} ${G.trim()} `).join(",");p+=$.cssText.replace(B,q)}}p+="}",i+=p}else if(l instanceof CSSKeyframesRule){i+=`@keyframes ${l.name} {`;for(let p=0;p<l.cssRules.length;p++){const h=l.cssRules[p];h instanceof CSSKeyframeRule&&(i+=`${h.keyText} { ${h.style.cssText} }`)}i+="}"}else l instanceof CSSFontFaceRule&&(i+=`@font-face { ${l.style.cssText} }`)}return i=r+i,t.textContent=i,document.head.appendChild(t),t}const rt="./assets/index-b276ff4e.css";let ye;ye=[];let be,Be,ot=new Promise(e=>{Be=e});async function it(){be=(await ge(()=>import("./Index-25fb47ed.js").then(e=>e.I),["./Index-25fb47ed.js","./Index-e07f7546.css"],import.meta.url)).default,Be()}function at(){const e={SvelteComponent:pe.SvelteComponent};for(const t in pe)t!=="SvelteComponent"&&(t==="SvelteComponentDev"?e[t]=e.SvelteComponent:e[t]=pe[t]);window.__gradio__svelte__internal=e;class s extends HTMLElement{constructor(){super(),this.host=this.getAttribute("host"),this.space=this.getAttribute("space"),this.src=this.getAttribute("src"),this.control_page_title=this.getAttribute("control_page_title"),this.initial_height=this.getAttribute("initial_height")??"300px",this.is_embed=this.getAttribute("embed")??"true",this.container=this.getAttribute("container")??"true",this.info=this.getAttribute("info")??!0,this.autoscroll=this.getAttribute("autoscroll"),this.eager=this.getAttribute("eager"),this.theme_mode=this.getAttribute("theme_mode"),this.updating=!1,this.loading=!1}async connectedCallback(){await it(),this.loading=!0,this.app&&this.app.$destroy(),typeof ye!="string"&&ye.forEach(n=>xe(n,document.head)),await xe(rt,document.head);const o=new CustomEvent("domchange",{bubbles:!0,cancelable:!1,composed:!0});new MutationObserver(n=>{this.dispatchEvent(o)}).observe(this,{childList:!0}),this.app=new be({target:this,props:{space:this.space?this.space.trim():this.space,src:this.src?this.src.trim():this.src,host:this.host?this.host.trim():this.host,info:this.info!=="false",container:this.container!=="false",is_embed:this.is_embed!=="false",initial_height:this.initial_height,eager:this.eager==="true",version:"4-27-0",theme_mode:this.theme_mode,autoscroll:this.autoscroll==="true",control_page_title:this.control_page_title==="true",client:Oe,upload_files:me,app_mode:window.__gradio_mode__==="app"}}),this.updating&&this.setAttribute(this.updating.name,this.updating.value),this.loading=!1}static get observedAttributes(){return["src","space","host"]}async attributeChangedCallback(o,r,n){if(await ot,(o==="host"||o==="space"||o==="src")&&n!==r){if(this.updating={name:o,value:n},this.loading)return;this.app&&this.app.$destroy(),this.space=null,this.host=null,this.src=null,o==="host"?this.host=n:o==="space"?this.space=n:o==="src"&&(this.src=n),this.app=new be({target:this,props:{space:this.space?this.space.trim():this.space,src:this.src?this.src.trim():this.src,host:this.host?this.host.trim():this.host,info:this.info!=="false",container:this.container!=="false",is_embed:this.is_embed!=="false",initial_height:this.initial_height,eager:this.eager==="true",version:"4-27-0",theme_mode:this.theme_mode,autoscroll:this.autoscroll==="true",control_page_title:this.control_page_title==="true",client:Oe,upload_files:me,app_mode:window.__gradio_mode__==="app"}}),this.updating=!1}}}customElements.get("gradio-app")||customElements.define("gradio-app",s)}at();export{ge as _,dt as a,xe as m,ct as p,lt as u};
//# sourceMappingURL=index-b2d8d4c2.js.map
