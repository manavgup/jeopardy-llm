import{S as qe}from"./Index-25fb47ed.js";import{F as pe}from"./File-d0b52941.js";import{B as Ee}from"./SelectSource.svelte_svelte_type_style_lang-a1c177eb.js";import{B as Fe}from"./BlockLabel-773ad87b.js";import"./index-b2d8d4c2.js";import"./svelte/svelte.js";const{SvelteComponent:je,append:te,attr:I,detach:Be,init:Le,insert:De,noop:H,safe_not_equal:Ie,set_style:N,svg_element:K}=window.__gradio__svelte__internal;function Ne(t){let e,n,l;return{c(){e=K("svg"),n=K("g"),l=K("path"),I(l,"d","M12.7,24.033C12.256,24.322 11.806,24.339 11.351,24.084C10.896,23.829 10.668,23.434 10.667,22.9L10.667,9.1C10.667,8.567 10.895,8.172 11.351,7.916C11.807,7.66 12.256,7.677 12.7,7.967L23.567,14.867C23.967,15.133 24.167,15.511 24.167,16C24.167,16.489 23.967,16.867 23.567,17.133L12.7,24.033Z"),N(l,"fill","currentColor"),N(l,"fill-rule","nonzero"),I(n,"transform","matrix(1,0,0,1,-10.6667,-7.73588)"),I(e,"width","100%"),I(e,"height","100%"),I(e,"viewBox","0 0 14 17"),I(e,"version","1.1"),N(e,"fill-rule","evenodd"),N(e,"clip-rule","evenodd"),N(e,"stroke-linejoin","round"),N(e,"stroke-miterlimit","2")},m(i,o){De(i,e,o),te(e,n),te(n,l)},p:H,i:H,o:H,d(i){i&&Be(e)}}}class Je extends je{constructor(e){super(),Le(this,e,null,Ne,Ie,{})}}const{SvelteComponent:Oe,attr:ne,detach:Re,element:Te,flush:le,init:Ue,insert:ze,listen:ie,noop:se,run_all:Ae,safe_not_equal:Me,toggle_class:re}=window.__gradio__svelte__internal,{createEventDispatcher:We}=window.__gradio__svelte__internal;function Ze(t){let e,n,l;return{c(){e=Te("input"),ne(e,"type","checkbox"),e.disabled=t[1],ne(e,"class","svelte-1j130g3"),re(e,"disabled",t[1]&&!t[0])},m(i,o){ze(i,e,o),e.checked=t[0],n||(l=[ie(e,"change",t[3]),ie(e,"input",t[4])],n=!0)},p(i,[o]){o&2&&(e.disabled=i[1]),o&1&&(e.checked=i[0]),o&3&&re(e,"disabled",i[1]&&!i[0])},i:se,o:se,d(i){i&&Re(e),n=!1,Ae(l)}}}function Ge(t,e,n){let{value:l}=e,{disabled:i}=e;const o=We();function s(){l=this.checked,n(0,l)}const f=()=>o("change",!l);return t.$$set=_=>{"value"in _&&n(0,l=_.value),"disabled"in _&&n(1,i=_.disabled)},[l,i,o,s,f]}class He extends Oe{constructor(e){super(),Ue(this,e,Ge,Ze,Me,{value:0,disabled:1})}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),le()}get disabled(){return this.$$.ctx[1]}set disabled(e){this.$$set({disabled:e}),le()}}const oe=""+new URL("light-file-0e72c1e1.svg",import.meta.url).href,_e=""+new URL("light-folder-4e9756c4.svg",import.meta.url).href;const{SvelteComponent:Ke,append:D,attr:q,bubble:Pe,check_outros:V,create_component:Y,destroy_component:$,destroy_each:Qe,detach:W,element:R,ensure_array_like:fe,flush:j,group_outros:X,init:Ve,insert:Z,listen:ce,mount_component:x,noop:ae,run_all:Xe,safe_not_equal:Ye,set_data:$e,space:T,src_url_equal:ue,stop_propagation:xe,text:et,toggle_class:he,transition_in:p,transition_out:E}=window.__gradio__svelte__internal,{createEventDispatcher:tt}=window.__gradio__svelte__internal;function de(t,e,n){const l=t.slice();return l[21]=e[n].type,l[22]=e[n].name,l[23]=e[n].valid,l[25]=n,l}function nt(t){let e,n,l;return{c(){e=R("span"),n=R("img"),ue(n.src,l=t[22]==="."?_e:oe)||q(n,"src",l),q(n,"alt","file icon"),q(n,"class","svelte-hyugph"),q(e,"class","file-icon svelte-hyugph")},m(i,o){Z(i,e,o),D(e,n)},p(i,o){o&64&&!ue(n.src,l=i[22]==="."?_e:oe)&&q(n,"src",l)},i:ae,o:ae,d(i){i&&W(e)}}}function lt(t){let e,n,l,i,o;n=new Je({});function s(){return t[15](t[25])}function f(..._){return t[16](t[25],..._)}return{c(){e=R("span"),Y(n.$$.fragment),q(e,"class","icon svelte-hyugph"),q(e,"role","button"),q(e,"aria-label","expand directory"),q(e,"tabindex","0"),he(e,"hidden",!t[7].includes(t[25]))},m(_,d){Z(_,e,d),x(n,e,null),l=!0,i||(o=[ce(e,"click",xe(s)),ce(e,"keydown",f)],i=!0)},p(_,d){t=_,(!l||d&128)&&he(e,"hidden",!t[7].includes(t[25]))},i(_){l||(p(n.$$.fragment,_),l=!0)},o(_){E(n.$$.fragment,_),l=!1},d(_){_&&W(e),$(n),i=!1,Xe(o)}}}function ge(t){let e,n;function l(...s){return t[17](t[22],...s)}function i(...s){return t[18](t[22],...s)}function o(...s){return t[19](t[22],...s)}return e=new ye({props:{path:[...t[0],t[22]],selected_files:t[1].filter(l).map(be),selected_folders:t[2].filter(i).map(ve),is_selected_entirely:t[2].some(o),interactive:t[3],ls_fn:t[4],file_count:t[5],valid_for_selection:t[23]}}),e.$on("check",t[20]),{c(){Y(e.$$.fragment)},m(s,f){x(e,s,f),n=!0},p(s,f){t=s;const _={};f&65&&(_.path=[...t[0],t[22]]),f&66&&(_.selected_files=t[1].filter(l).map(be)),f&68&&(_.selected_folders=t[2].filter(i).map(ve)),f&68&&(_.is_selected_entirely=t[2].some(o)),f&8&&(_.interactive=t[3]),f&16&&(_.ls_fn=t[4]),f&32&&(_.file_count=t[5]),f&64&&(_.valid_for_selection=t[23]),e.$set(_)},i(s){n||(p(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){$(e,s)}}}function me(t){let e,n,l,i,o,s,f,_=t[22]+"",d,h,a=t[21]==="folder"&&t[7].includes(t[25]),c,u;function k(...m){return t[13](t[22],...m)}function S(...m){return t[14](t[22],t[21],t[25],...m)}l=new He({props:{disabled:!t[3]||t[21]==="folder"&&t[5]==="single",value:(t[21]==="file"?t[1]:t[2]).some(k)}}),l.$on("change",S);const y=[lt,nt],C=[];function B(m,w){return m[21]==="folder"?0:1}o=B(t),s=C[o]=y[o](t);let g=a&&ge(t);return{c(){e=R("li"),n=R("span"),Y(l.$$.fragment),i=T(),s.c(),f=T(),d=et(_),h=T(),g&&g.c(),c=T(),q(n,"class","wrap svelte-hyugph"),q(e,"class","svelte-hyugph")},m(m,w){Z(m,e,w),D(e,n),x(l,n,null),D(n,i),C[o].m(n,null),D(n,f),D(n,d),D(e,h),g&&g.m(e,null),D(e,c),u=!0},p(m,w){t=m;const F={};w&104&&(F.disabled=!t[3]||t[21]==="folder"&&t[5]==="single"),w&70&&(F.value=(t[21]==="file"?t[1]:t[2]).some(k)),l.$set(F);let L=o;o=B(t),o===L?C[o].p(t,w):(X(),E(C[L],1,1,()=>{C[L]=null}),V(),s=C[o],s?s.p(t,w):(s=C[o]=y[o](t),s.c()),p(s,1),s.m(n,f)),(!u||w&64)&&_!==(_=t[22]+"")&&$e(d,_),w&192&&(a=t[21]==="folder"&&t[7].includes(t[25])),a?g?(g.p(t,w),w&192&&p(g,1)):(g=ge(t),g.c(),p(g,1),g.m(e,c)):g&&(X(),E(g,1,1,()=>{g=null}),V())},i(m){u||(p(l.$$.fragment,m),p(s),p(g),u=!0)},o(m){E(l.$$.fragment,m),E(s),E(g),u=!1},d(m){m&&W(e),$(l),C[o].d(),g&&g.d()}}}function it(t){let e,n,l=fe(t[6]),i=[];for(let s=0;s<l.length;s+=1)i[s]=me(de(t,l,s));const o=s=>E(i[s],1,1,()=>{i[s]=null});return{c(){e=R("ul");for(let s=0;s<i.length;s+=1)i[s].c();q(e,"class","svelte-hyugph")},m(s,f){Z(s,e,f);for(let _=0;_<i.length;_+=1)i[_]&&i[_].m(e,null);n=!0},p(s,[f]){if(f&2047){l=fe(s[6]);let _;for(_=0;_<l.length;_+=1){const d=de(s,l,_);i[_]?(i[_].p(d,f),p(i[_],1)):(i[_]=me(d),i[_].c(),p(i[_],1),i[_].m(e,null))}for(X(),_=l.length;_<i.length;_+=1)o(_);V()}},i(s){if(!n){for(let f=0;f<l.length;f+=1)p(i[f]);n=!0}},o(s){i=i.filter(Boolean);for(let f=0;f<i.length;f+=1)E(i[f]);n=!1},d(s){s&&W(e),Qe(i,s)}}}const be=t=>t.slice(1),ve=t=>t.slice(1);function st(t,e,n){let{path:l=[]}=e,{selected_files:i=[]}=e,{selected_folders:o=[]}=e,{is_selected_entirely:s=!1}=e,{interactive:f}=e,{ls_fn:_}=e,{file_count:d="multiple"}=e,{valid_for_selection:h}=e,a=[],c=[];const u=r=>{c.includes(r)?n(7,c=c.filter(b=>b!==r)):n(7,c=[...c,r])},k=r=>{c.includes(r)||n(7,c=[...c,r])};(async()=>(n(6,a=await _(l)),h&&n(6,a=[{name:".",type:"file"},...a]),n(7,c=a.map((r,b)=>r.type==="folder"&&(s||i.some(G=>G[0]===r.name))?b:null).filter(r=>r!==null))))();const S=tt(),y=(r,b)=>b[0]===r&&b.length===1,C=(r,b,G,Se)=>{let ee=Se.detail;S("check",{path:[...l,r],checked:ee,type:b}),b==="folder"&&ee&&k(G)},B=r=>u(r),g=(r,{key:b})=>{(b===" "||b==="Enter")&&u(r)},m=(r,b)=>b[0]===r,w=(r,b)=>b[0]===r,F=(r,b)=>b[0]===r&&b.length===1;function L(r){Pe.call(this,t,r)}return t.$$set=r=>{"path"in r&&n(0,l=r.path),"selected_files"in r&&n(1,i=r.selected_files),"selected_folders"in r&&n(2,o=r.selected_folders),"is_selected_entirely"in r&&n(11,s=r.is_selected_entirely),"interactive"in r&&n(3,f=r.interactive),"ls_fn"in r&&n(4,_=r.ls_fn),"file_count"in r&&n(5,d=r.file_count),"valid_for_selection"in r&&n(12,h=r.valid_for_selection)},t.$$.update=()=>{t.$$.dirty&2113&&s&&a.forEach(r=>{S("check",{path:[...l,r.name],checked:!0,type:r.type})})},[l,i,o,f,_,d,a,c,u,k,S,s,h,y,C,B,g,m,w,F,L]}class ye extends Ke{constructor(e){super(),Ve(this,e,st,it,Ye,{path:0,selected_files:1,selected_folders:2,is_selected_entirely:11,interactive:3,ls_fn:4,file_count:5,valid_for_selection:12})}get path(){return this.$$.ctx[0]}set path(e){this.$$set({path:e}),j()}get selected_files(){return this.$$.ctx[1]}set selected_files(e){this.$$set({selected_files:e}),j()}get selected_folders(){return this.$$.ctx[2]}set selected_folders(e){this.$$set({selected_folders:e}),j()}get is_selected_entirely(){return this.$$.ctx[11]}set is_selected_entirely(e){this.$$set({is_selected_entirely:e}),j()}get interactive(){return this.$$.ctx[3]}set interactive(e){this.$$set({interactive:e}),j()}get ls_fn(){return this.$$.ctx[4]}set ls_fn(e){this.$$set({ls_fn:e}),j()}get file_count(){return this.$$.ctx[5]}set file_count(e){this.$$set({file_count:e}),j()}get valid_for_selection(){return this.$$.ctx[12]}set valid_for_selection(e){this.$$set({valid_for_selection:e}),j()}}const{SvelteComponent:rt,attr:ot,create_component:_t,destroy_component:ft,detach:ct,element:at,flush:U,init:ut,insert:ht,mount_component:dt,safe_not_equal:gt,transition_in:mt,transition_out:bt}=window.__gradio__svelte__internal;function vt(t){let e,n,l;return n=new ye({props:{path:[],selected_files:t[0],selected_folders:t[4],interactive:t[1],ls_fn:t[3],file_count:t[2],valid_for_selection:!1}}),n.$on("check",t[8]),{c(){e=at("div"),_t(n.$$.fragment),ot(e,"class","file-wrap svelte-dicskc")},m(i,o){ht(i,e,o),dt(n,e,null),l=!0},p(i,[o]){const s={};o&1&&(s.selected_files=i[0]),o&16&&(s.selected_folders=i[4]),o&2&&(s.interactive=i[1]),o&8&&(s.ls_fn=i[3]),o&4&&(s.file_count=i[2]),n.$set(s)},i(i){l||(mt(n.$$.fragment,i),l=!0)},o(i){bt(n.$$.fragment,i),l=!1},d(i){i&&ct(e),ft(n)}}}function kt(t,e,n){let{interactive:l}=e,{file_count:i="multiple"}=e,{value:o=[]}=e,{ls_fn:s}=e,f=[];const _=(c,u)=>c.join("/")===u.join("/"),d=(c,u)=>u.some(k=>_(k,c)),h=(c,u)=>c.join("/").startsWith(u.join("/")),a=c=>{const{path:u,checked:k,type:S}=c.detail;k?i==="single"?n(0,o=[u]):S==="folder"?d(u,f)||n(4,f=[...f,u]):d(u,o)||n(0,o=[...o,u]):(n(4,f=f.filter(y=>!h(u,y))),S==="folder"?(n(4,f=f.filter(y=>!h(y,u))),n(0,o=o.filter(y=>!h(y,u)))):n(0,o=o.filter(y=>!_(y,u))))};return t.$$set=c=>{"interactive"in c&&n(1,l=c.interactive),"file_count"in c&&n(2,i=c.file_count),"value"in c&&n(0,o=c.value),"ls_fn"in c&&n(3,s=c.ls_fn)},[o,l,i,s,f,_,d,h,a]}class wt extends rt{constructor(e){super(),ut(this,e,kt,vt,gt,{interactive:1,file_count:2,value:0,ls_fn:3})}get interactive(){return this.$$.ctx[1]}set interactive(e){this.$$set({interactive:e}),U()}get file_count(){return this.$$.ctx[2]}set file_count(e){this.$$set({file_count:e}),U()}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),U()}get ls_fn(){return this.$$.ctx[3]}set ls_fn(e){this.$$set({ls_fn:e}),U()}}const{SvelteComponent:yt,add_flush_callback:Ct,assign:St,bind:qt,binding_callbacks:pt,check_outros:Et,create_component:z,destroy_component:A,detach:P,empty:Ft,flush:v,get_spread_object:jt,get_spread_update:Bt,group_outros:Lt,init:Dt,insert:Q,mount_component:M,noop:It,safe_not_equal:Ce,space:ke,transition_in:J,transition_out:O}=window.__gradio__svelte__internal;function we(t){let e,n,l;function i(s){t[20](s)}let o={file_count:t[7],interactive:t[14],ls_fn:t[13].ls};return t[0]!==void 0&&(o.value=t[0]),e=new wt({props:o}),pt.push(()=>qt(e,"value",i)),{c(){z(e.$$.fragment)},m(s,f){M(e,s,f),l=!0},p(s,f){const _={};f&128&&(_.file_count=s[7]),f&16384&&(_.interactive=s[14]),f&8192&&(_.ls_fn=s[13].ls),!n&&f&1&&(n=!0,_.value=s[0],Ct(()=>n=!1)),e.$set(_)},i(s){l||(J(e.$$.fragment,s),l=!0)},o(s){O(e.$$.fragment,s),l=!1},d(s){A(e,s)}}}function Nt(t){let e,n,l,i,o=t[15],s,f;const _=[t[8],{autoscroll:t[12].autoscroll},{i18n:t[12].i18n}];let d={};for(let a=0;a<_.length;a+=1)d=St(d,_[a]);e=new qe({props:d}),l=new Fe({props:{show_label:t[5],Icon:pe,label:t[4]||"FileExplorer",float:!1}});let h=we(t);return{c(){z(e.$$.fragment),n=ke(),z(l.$$.fragment),i=ke(),h.c(),s=Ft()},m(a,c){M(e,a,c),Q(a,n,c),M(l,a,c),Q(a,i,c),h.m(a,c),Q(a,s,c),f=!0},p(a,c){const u=c&4352?Bt(_,[c&256&&jt(a[8]),c&4096&&{autoscroll:a[12].autoscroll},c&4096&&{i18n:a[12].i18n}]):{};e.$set(u);const k={};c&32&&(k.show_label=a[5]),c&16&&(k.label=a[4]||"FileExplorer"),l.$set(k),c&32768&&Ce(o,o=a[15])?(Lt(),O(h,1,1,It),Et(),h=we(a),h.c(),J(h,1),h.m(s.parentNode,s)):h.p(a,c)},i(a){f||(J(e.$$.fragment,a),J(l.$$.fragment,a),J(h),f=!0)},o(a){O(e.$$.fragment,a),O(l.$$.fragment,a),O(h),f=!1},d(a){a&&(P(n),P(i),P(s)),A(e,a),A(l,a),h.d(a)}}}function Jt(t){let e,n;return e=new Ee({props:{visible:t[3],variant:t[0]===null?"dashed":"solid",border_mode:"base",padding:!1,elem_id:t[1],elem_classes:t[2],container:t[9],scale:t[10],min_width:t[11],allow_overflow:!1,height:t[6],$$slots:{default:[Nt]},$$scope:{ctx:t}}}),{c(){z(e.$$.fragment)},m(l,i){M(e,l,i),n=!0},p(l,[i]){const o={};i&8&&(o.visible=l[3]),i&1&&(o.variant=l[0]===null?"dashed":"solid"),i&2&&(o.elem_id=l[1]),i&4&&(o.elem_classes=l[2]),i&512&&(o.container=l[9]),i&1024&&(o.scale=l[10]),i&2048&&(o.min_width=l[11]),i&64&&(o.height=l[6]),i&2159025&&(o.$$scope={dirty:i,ctx:l}),e.$set(o)},i(l){n||(J(e.$$.fragment,l),n=!0)},o(l){O(e.$$.fragment,l),n=!1},d(l){A(e,l)}}}function Ot(t,e,n){let l,{elem_id:i=""}=e,{elem_classes:o=[]}=e,{visible:s=!0}=e,{value:f}=e,_,{label:d}=e,{show_label:h}=e,{height:a=void 0}=e,{file_count:c="multiple"}=e,{root_dir:u}=e,{glob:k}=e,{ignore_glob:S}=e,{loading_status:y}=e,{container:C=!0}=e,{scale:B=null}=e,{min_width:g=void 0}=e,{gradio:m}=e,{server:w}=e,{interactive:F}=e;function L(r){f=r,n(0,f)}return t.$$set=r=>{"elem_id"in r&&n(1,i=r.elem_id),"elem_classes"in r&&n(2,o=r.elem_classes),"visible"in r&&n(3,s=r.visible),"value"in r&&n(0,f=r.value),"label"in r&&n(4,d=r.label),"show_label"in r&&n(5,h=r.show_label),"height"in r&&n(6,a=r.height),"file_count"in r&&n(7,c=r.file_count),"root_dir"in r&&n(16,u=r.root_dir),"glob"in r&&n(17,k=r.glob),"ignore_glob"in r&&n(18,S=r.ignore_glob),"loading_status"in r&&n(8,y=r.loading_status),"container"in r&&n(9,C=r.container),"scale"in r&&n(10,B=r.scale),"min_width"in r&&n(11,g=r.min_width),"gradio"in r&&n(12,m=r.gradio),"server"in r&&n(13,w=r.server),"interactive"in r&&n(14,F=r.interactive)},t.$$.update=()=>{t.$$.dirty&458752&&n(15,l=[u,k,S]),t.$$.dirty&528385&&JSON.stringify(f)!==JSON.stringify(_)&&(n(19,_=f),m.dispatch("change"))},[f,i,o,s,d,h,a,c,y,C,B,g,m,w,F,l,u,k,S,_,L]}class Wt extends yt{constructor(e){super(),Dt(this,e,Ot,Jt,Ce,{elem_id:1,elem_classes:2,visible:3,value:0,label:4,show_label:5,height:6,file_count:7,root_dir:16,glob:17,ignore_glob:18,loading_status:8,container:9,scale:10,min_width:11,gradio:12,server:13,interactive:14})}get elem_id(){return this.$$.ctx[1]}set elem_id(e){this.$$set({elem_id:e}),v()}get elem_classes(){return this.$$.ctx[2]}set elem_classes(e){this.$$set({elem_classes:e}),v()}get visible(){return this.$$.ctx[3]}set visible(e){this.$$set({visible:e}),v()}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),v()}get label(){return this.$$.ctx[4]}set label(e){this.$$set({label:e}),v()}get show_label(){return this.$$.ctx[5]}set show_label(e){this.$$set({show_label:e}),v()}get height(){return this.$$.ctx[6]}set height(e){this.$$set({height:e}),v()}get file_count(){return this.$$.ctx[7]}set file_count(e){this.$$set({file_count:e}),v()}get root_dir(){return this.$$.ctx[16]}set root_dir(e){this.$$set({root_dir:e}),v()}get glob(){return this.$$.ctx[17]}set glob(e){this.$$set({glob:e}),v()}get ignore_glob(){return this.$$.ctx[18]}set ignore_glob(e){this.$$set({ignore_glob:e}),v()}get loading_status(){return this.$$.ctx[8]}set loading_status(e){this.$$set({loading_status:e}),v()}get container(){return this.$$.ctx[9]}set container(e){this.$$set({container:e}),v()}get scale(){return this.$$.ctx[10]}set scale(e){this.$$set({scale:e}),v()}get min_width(){return this.$$.ctx[11]}set min_width(e){this.$$set({min_width:e}),v()}get gradio(){return this.$$.ctx[12]}set gradio(e){this.$$set({gradio:e}),v()}get server(){return this.$$.ctx[13]}set server(e){this.$$set({server:e}),v()}get interactive(){return this.$$.ctx[14]}set interactive(e){this.$$set({interactive:e}),v()}}export{Wt as default};
//# sourceMappingURL=Index-965e7a55.js.map
